/* ----------------------------------------------------------
 *
 * Percentage Circles - pcirc-1.0.min.js - 1 April 2016
 * Created by Matthew Lord
 * http://www.webdesignlord.com
 *
 * ---------------------------------------------------------- */

function pcircAnimate(e){setTimeout(function(){0==e.currentTime,e.currentTime<=e.animateTime&&(e.count<=180?e.border.css("background-image","linear-gradient("+Math.round(90+e.count)+"deg, transparent 50%, #"+e.secondaryColor+" 50%),linear-gradient(90deg, #"+e.secondaryColor+" 50%, transparent 50%)"):e.border.css("background-image","linear-gradient("+Math.round(e.count-90)+"deg, transparent 50%, #"+e.primaryColor+" 50%),linear-gradient(90deg, #"+e.secondaryColor+" 50%, transparent 50%)"),e.currentTime=e.currentTime+e.animateTimeout,e.count<e.percent?e.count=e.count+e.animateSteps:e.count=e.count-e.animateSteps,pcircAnimate(e))},e.animateTimeout)}$.fn.pcirc=function(e){$(this).each(function(){if("undefined"==typeof e&&(e=new Object),"undefined"==typeof e.backgroundColor?e.backgroundColor="eee":e.backgroundColor.replace("#",""),"undefined"==typeof e.primaryColor?e.primaryColor="006bb2":e.primaryColor.replace("#",""),"undefined"==typeof e.secondaryColor?e.secondaryColor="e1e1e1":e.secondaryColor.replace("#",""),"undefined"==typeof e.hoverColor?e.hoverColor="ccc":e.hoverColor.replace("#",""),"undefined"==typeof e.size&&(e.size="10"),"undefined"==typeof e.width&&(e.width="130"),"undefined"==typeof e.showText&&(e.showText=1),"undefined"==typeof e.circleText&&(e.circleText=""),"undefined"==typeof e.imgClass&&(e.imgClass=0),"undefined"==typeof e.animate&&(e.animate=0),"undefined"==typeof e.animateTime&&(e.animateTime=600),"undefined"!=typeof $(this).data("percent")?displayPercent=$(this).data("percent"):"undefined"==typeof e.percent?displayPercent="0":displayPercent=e.percent,displayPercent=Math.round(displayPercent),displayPercent>100&&(displayPercent=100),""==e.circleText?displayCircleText=displayPercent+"%":displayCircleText=e.circleText,html=['<div class="pcirc-wrap">','<div class="pcirc-border" data-animate="'+e.animate+'" data-percent="'+displayPercent+'" data-primary="'+e.primaryColor+'" data-secondary="'+e.secondaryColor+'">','<div class="pcirc-circle">','<div class="pcirc-display'+(0!=e.imgClass?" circle-icon "+e.imgClass:"")+'">'+displayCircleText+"</div>","</div>","</div>",'<div class="pcirc-label"></div>',"</div>"],output=html.join(""),labelText=$(this).html(),$(this).html(output),label=$(this).find(".pcirc-label"),percent=Math.floor(360*(displayPercent/100)),border=$(this).find(".pcirc-border"),circle=$(this).find(".pcirc-circle"),display=$(this).find(".pcirc-display"),"undefined"!=typeof e.label?label.html(e.label):label.html(labelText),""==label.html()&&label.hide(),circleSize=e.width-2*e.size,border.css("width",e.width+"px"),border.css("height",e.width+"px"),border.css("background","#"+e.primaryColor),circle.css("width",circleSize+"px"),circle.css("height",circleSize+"px"),circle.css("margin-top",-(circle.outerHeight()/2)),circle.css("margin-left",-(circle.outerWidth()/2)),circle.css("background-color","#"+e.backgroundColor),display.css("margin-top",-(display.outerHeight()/2)),display.css("margin-left",-(display.outerWidth()/2)),0==e.showText&&display.html(""),e.animate){border.css("background-image","linear-gradient(90deg, transparent 50%, #"+e.secondaryColor+" 50%),linear-gradient(90deg, #"+e.secondaryColor+" 50%, transparent 50%)");var r=new Object;r.animateTimeout=10,r.border=border,r.count=0,r.percent=percent,r.primaryColor=e.primaryColor,r.secondaryColor=e.secondaryColor,r.animateTime=e.animateTime,r.currentTime=0,r.animateSteps=r.animateTimeout*percent/e.animateTime,pcircAnimate(r)}else percent<=180?border.css("background-image","linear-gradient("+(90+percent)+"deg, transparent 50%, #"+e.secondaryColor+" 50%),linear-gradient(90deg, #"+e.secondaryColor+" 50%, transparent 50%)"):border.css("background-image","linear-gradient("+(percent-90)+"deg, transparent 50%, #"+e.primaryColor+" 50%),linear-gradient(90deg, #"+e.secondaryColor+" 50%, transparent 50%)")})},$.fn.pcircUpdate=function(e){if("undefined"==typeof e&&(e=new Object),"undefined"==typeof e.percent&&(e.percent=-1),-1!=e.percent&&(e.percent>100&&(e.percent=100),percent=Math.floor(360*(e.percent/100)),border=$(this).find(".pcirc-border"),display=$(this).find(".pcirc-display"),primaryColor=border.data("primary"),secondaryColor=border.data("secondary"),origPercent=border.data("percent"),isAnimate=border.data("animate"),originalPercent=Math.floor(360*(origPercent/100)),border.data("percent",e.percent),"undefined"!=typeof e.label&&(label=$(this).find(".pcirc-label"),label.html(e.label)),""!=display.html()&&display.html(e.percent+"%"),originalPercent!=percent))if(isAnimate){var r=new Object;r.animateTimeout=20,r.border=border,r.count=originalPercent,r.percent=percent,r.primaryColor=primaryColor,r.secondaryColor=secondaryColor,r.animateTime=200,r.currentTime=0,r.animateSteps=r.animateTimeout*Math.abs(originalPercent-percent)/r.animateTime,pcircAnimate(r)}else percent<=180?border.css("background-image","linear-gradient("+(90+percent)+"deg, transparent 50%, #"+secondaryColor+" 50%),linear-gradient(90deg, #"+secondaryColor+" 50%, transparent 50%)"):border.css("background-image","linear-gradient("+(percent-90)+"deg, transparent 50%, #"+primaryColor+" 50%),linear-gradient(90deg, #"+secondaryColor+" 50%, transparent 50%)")};